# Railway uses Nixpacks for .NET builds
# This file configures the build process

[phases.setup]
nixPkgs = ["dotnet-sdk_8", "nodejs-18_x"]

[phases.install]
cmds = [
  "cd ClientApp && npm install --legacy-peer-deps",
  "dotnet restore"
]

[phases.build]
cmds = [
  "cd ClientApp && npm run build -- --configuration production",
  "dotnet build -c Release",
  "dotnet publish -c Release -o ./publish"
]

[start]
cmd = "dotnet ./publish/SDMS.AuthenticationWebApp.dll"

